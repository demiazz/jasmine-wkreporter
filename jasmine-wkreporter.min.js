/*
  @class 

  Simple reporter for Jasmine. Using Notification API from Chrome/Chromium browser,
  for report results of running specs.

  @author Alexey Plutalov <demiazz.py@gmail.com>
  @since Jasmine Webkit Reporter 0.1
*/((function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};jasmine.WebkitReporter=function(a){function c(a){a==null&&(a={}),jasmine.getGlobal().webkitNotifications?(a&&(a.title&&(this.title=a.title),a.replaceId&&(this.replaceId=a.replaceId),a.timeout&&(this.timeout=a.timeout),a.passedIcon&&(this.passedIcon=a.passedIcon),a.failedIcon&&(this.failedIcon=a.failedIcon),a.runningIcon&&(this.runningIcon=a.runningIcon)),this.startedAt=null,this.finishedAt=null):(this.reportRunnerStarting=function(){},this.reportRunnerResults=function(){});return}return b(c,a),c.prototype.title="Jasmine",c.prototype.replaceId="jasmine",c.prototype.timeout=0,c.prototype.passedIcon="",c.prototype.failedIcon="",c.prototype.runningIcon="",c.prototype.reportRunnerStarting=function(a){var b;jasmine.getGlobal().webkitNotifications.checkPermission()===0?(this.startedAt=new Date,this.finishedAt=null,this.title&&this.title.length>0?b=""+this.title+": RUNNING":b="RUNNING",this.showReport(this.runningIcon,b,"Running specs. Please wait...")):jasmine.getGlobal().webkitNotifications.requestPermission()},c.prototype.reportRunnerResults=function(a){var b,c,d,e,f;this.finishedAt=new Date,jasmine.getGlobal().webkitNotifications.checkPermission()===0?(b="",f="",c="",e=(this.finishedAt.getTime()-this.startedAt.getTime())/1e3,this.title&&this.title.length>0&&(f=this.title+": "),d=a.results(),d.failedCount>0?(b=this.failedIcon,f+="FAILED"):(b=this.passedIcon,f+="PASSED"),c+=""+d.totalCount+" spec"+(d.totalCount===1?"":"s"),c+=", "+d.failedCount+" failure"+(d.failedCount===1?"":"s"),c+=" in "+e+"s",this.showReport(b,f,c)):jasmine.getGlobal().webkitNotifications.requestPermission()},c.prototype.showReport=function(a,b,c){var d;d=jasmine.getGlobal().webkitNotifications.createNotification(a,b,c),d.replaceId=this.replaceId,d.show(),this.timeout>0&&setTimeout(function(){d.cancel()},this.timeout)},c}(jasmine.Reporter)})).call(this);